(this["webpackJsonpdalle-playground"]=this["webpackJsonpdalle-playground"]||[]).push([[0],{123:function(e,t,a){},133:function(e,t){},160:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),i=a.n(c),l=(a(93),a(14)),o=a(22),s=a.n(o),u=a(188),d=a(186),m=a(42),p=a.n(m),f=a(63),g=a(64),h=a.n(g);function b(){return(b=Object(f.a)(p.a.mark((function e(t,a,n,r){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=h.a,e.next=3,fetch(t+"/dalle",{method:"POST",headers:{"Bypass-Tunnel-Reminder":"go",mode:"no-cors"},body:JSON.stringify({text:a,num_images:n,model_name:r})}).then((function(e){return e})).catch((function(e){throw alert("Error querying DALL-E service. "+e),e}));case 3:return e.next=5,e.sent.text();case 5:return e.t1=e.sent,e.abrupt("return",e.t0.parse.call(e.t0,e.t1));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(f.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=h.a,e.next=3,fetch(t+"/available-models",{headers:{"Bypass-Tunnel-Reminder":"go",mode:"no-cors"}}).then((function(e){return e})).catch((function(e){throw alert("Error fetching available models. "+e),e}));case 3:return e.next=5,e.sent.text();case 5:return e.t1=e.sent,e.abrupt("return",e.t0.parse.call(e.t0,e.t1));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=function(e){var t=e.imgData,a=e.alt;return r.a.createElement("img",{src:"data:image/png;base64,".concat(t),alt:a})},v=function(e){var t=e.generatedImages;return r.a.createElement(d.a,{container:!0,justify:"center",alignItems:"center",spacing:3},t.map((function(e,t){return r.a.createElement(d.a,{item:!0,id:t},r.a.createElement(x,{imgData:e,alt:t}))})))},y=a(189),j=s()((function(){return{inputPrompt:{minWidth:"450px"}}}))((function(e){var t=e.classes,a=e.enterPressedCallback,c=e.disabled,i=Object(n.useState)(""),o=Object(l.a)(i,2),s=o[0],u=o[1];return r.a.createElement(y.a,{className:t.inputPrompt,id:"prompt-input",label:"Text prompt",helperText:"hit Enter to search",placeholder:"e.g. an apple on a table",value:s,onChange:function(e){u(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&a(s)},disabled:c})})),O=a(53),w=(a(123),a(190)),k=s()((function(){return{inputModel:{minWidth:"100px",marginTop:"20px"}}}))((function(e){var t=e.classes,a=e.models,n=e.selectedModel,c=e.onModelSelected,i=e.disabled;return r.a.createElement(y.a,{className:t.inputModel,id:"models-input",select:!0,label:"Models",value:n,onChange:c,helperText:"Pre-trained model to use",disabled:i},a&&a.map((function(e){return r.a.createElement(w.a,{key:e,value:e},e)})),">")}));var S=a(82),L=a.n(S),B=s()((function(){return{inputBackend:{minWidth:"220px"},loadingSpinner:{paddingTop:"20px !important"}}}))((function(e){var t=e.classes,a=e.setBackendValidUrl,c=e.setBackendInvalidUrl,i=e.isLoadingModels,o=Object(n.useState)(""),s=Object(l.a)(o,2),u=s[0],m=s[1];function p(e){var t;m(e),t=e,new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)?a(e):c()}return Object(n.useEffect)((function(){var e=L.a.parse(window.location.search,{ignoreQueryPrefix:!0}).backendUrl;e&&p(e)}),[m]),r.a.createElement(d.a,{container:!0,spacing:1,alignContent:"center"},r.a.createElement(d.a,{item:!0},r.a.createElement(y.a,{className:t.inputBackend,id:"standard-basic",label:"Backend URL",value:u,onChange:function(e){return p(e.target.value)}})),r.a.createElement(d.a,{item:!0,className:t.loadingSpinner},r.a.createElement(O.PulseLoader,{sizeUnit:"px",size:5,color:"purple",loading:i})))})),P=s()((function(){return{root:{display:"flex",flex:"1",flexDirection:"column",margin:"100px 0px 100px 0px",alignItems:"center",textAlign:"center"},title:{marginBottom:"20px"},subtitle:{marginBottom:"30px"},gallery:{marginTop:"30px",padding:"10px",maxWidth:"60%"}}}))((function(e){var t=e.classes,a=Object(n.useState)(""),c=Object(l.a)(a,2),i=c[0],o=c[1],s=Object(n.useState)([]),m=Object(l.a)(s,2),p=m[0],f=m[1],g=Object(n.useState)(""),h=Object(l.a)(g,2),x=h[0],y=h[1],w=Object(n.useState)(!1),S=Object(l.a)(w,2),L=S[0],P=S[1],z=Object(n.useState)(!1),I=Object(l.a)(z,2),M=I[0],N=I[1],T=Object(n.useState)([]),U=Object(l.a)(T,2),D=U[0],A=U[1],C=""!==i;return Object(n.useEffect)((function(){C&&(N(!0),function(e){return E.apply(this,arguments)}(i).then((function(e){f(e),e&&e.length>0&&y(e[0]),N(!1)})).catch((function(e){N(!1)})))}),[i]),r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.title},r.a.createElement(u.a,{variant:"h3"},"DALL-E Playground ",r.a.createElement("span",{role:"img","aria-label":"sparks-emoji"},"\u2728"))),r.a.createElement("div",{className:t.subtitle},r.a.createElement(u.a,{variant:"body1"},"Put your DALL-E backend URL to start")),r.a.createElement(d.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(d.a,{container:!0,justify:"center",alignItems:"center",direction:"row",spacing:3},r.a.createElement(d.a,{item:!0},r.a.createElement(B,{setBackendValidUrl:o,isLoadingModels:M,setBackendInvalidUrl:function(){f([]),y("")}})),r.a.createElement(d.a,{item:!0},r.a.createElement(k,{models:p,selectedModel:x,onModelSelected:function(e){y(e.target.value)},disabled:!C||M})))),r.a.createElement(d.a,{item:!0,xs:12},r.a.createElement(j,{enterPressedCallback:function(e){console.log("API call to DALL-E web service with the following prompt ["+e+"]"),P(!0),function(e,t,a,n){return b.apply(this,arguments)}(i,e,5,x).then((function(e){A(e),P(!1)}))},disabled:L||!C||M}))),r.a.createElement(d.a,{container:!0,justify:"center",alignItems:"center",className:t.gallery},!L&&r.a.createElement(v,{generatedImages:D}),L&&r.a.createElement(O.PulseLoader,{sizeUnit:"px",size:20,color:"purple",loading:L})))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},88:function(e,t,a){e.exports=a(160)},93:function(e,t,a){}},[[88,1,2]]]);
//# sourceMappingURL=main.ae95f2c3.chunk.js.map